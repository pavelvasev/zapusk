## Пример 2

Цель - использовать запуск-программу из [примера 1](../1-lang.zdb) в качестве блока в новой программе.

1. Создайте каталог `2-example.zdb`
> Это будет каталог для новой программы.

2. Создайте в нем файл `zapusk.conf` аналогично как в примере 1.

3. Скопируйте внутрь подкаталог из примера 1 с именем `test1.zdb`
> Мы будем использовать test1.zdb как тип блока в нашей новой программе. Сообразно он должен быть
> доступен. Самый простой способ сделать доступным это разместить как под-каталог.
> Другой вариант - скопировать в папку zapusk-tool/lib.

4. Создайте файл `myfile.ini` следующего содержания:
```
######## zero
[test1]
beta=0

######## a
[test1]

######## b
[test1]
alfa=vinni
beta=puh
```
> Создана новая запуск-программа. Она использует первую в качестве типа блока.
> На это указывают скобки `[test1]`.

5. Выполните команду `zapusk apply`. Результат:
```
creating alfa 5
creating beta 0
creating alfa 5
creating beta 7
creating alfa vinni
creating beta puh
```
> Все блоки выполнили команду apply

6. Выполните команду `zapusk work`. Результат:
```
working 0
working 7
working puh
```
> Все блоки выполнили команду work

7. Удалите блок `##### a` и его содержимое, оставив в файле `myfile.ini` только строчки:
```
######## zero
[test1]
beta=0

######## b
[test1]
alfa=vinni
beta=puh
```
> В настройке серверов часто возникает желание что-нибудь убрать.
> Здесь мы экспериментируем с такой возможностью, встроенной в Zapusk.

8. Выполните `zapusk work`. Результат:
```
destroying alfa 5
working 0
working puh
```
>
> zapusk-tool отследил, что блок **a** удален, и вызвал метод destroy у его типа с его параметрами,
> которые сохраняются в каталоге состояния. destroy вызывается однократно.

9. Выполните `zapusk work` повторно. Результат:
```
working 0
working puh
```
> Все блоки (оставшиеся) выполнили команду work.

10. Добавьте в файл строки, как указано ниже:
```
######## zero
[test1]
beta=0

######## b
[test1]
alfa=vinni
beta=puh

######## c
[os]
work=echo c is also working good
```
Результат выполнения `zapusk work`:
```
working 0
working puh
c is also working good
```

11. Выполните `zapusk destroy`. Результат:
```
destroying alfa 5
destroying alfa vinni
```

12. Выполните команду `zapusk destroy` еще раз. 

Результат - пустой, потому что все развернутые блоки уже выполняли destroy и свернуты.
