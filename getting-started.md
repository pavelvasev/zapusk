# Начало работы

## Пример 1

Цель - создать простую запуск-программу, научиться ее запускать, познакомиться с терминами.

1. Установите zapusk-tool согласно [инструкции](https://github.com/pavelvasev/zapusk-tool).
> Zapusk-tool это инструмент интерпретации zapusk-программ.

2. Создайте каталог с именем `test1.zdb`
> Каждая zapusk-программа записывается в отдельном каталоге с расширением `.zdb`.
> В каталоге размещается набор файлов *.ini
> Все файлы читаются в алфавитном порядке, объединяются, и это интерпретируется как текст запуск-программы.

3. Создайте в этом каталоге файл `main.ini` следующего содержания:
```
####### params
alfa=5
beta=7

####### block1
[os]
apply=echo "creating alfa {{alfa}}"
destroy=echo "destroying alfa {{alfa}}"

####### block2
[os]
apply=echo "creating beta {{beta}}"
work=echo "working beta {{beta}}"
```
> Таким образом, Вы создали первую запуск-программу.
> Данная запуск-программа содержит блок параметров и два исполнительных блока.

> Каждый исполнительный блок описывает перечень команд, на которые
> он реагирует, и как именно реагирует.
> В данном случае это вызов шелл-команд операционной системы.
> Команды **apply** и **destroy** это стандартные имена команд Zapusk.
> Команда **work** это творчество примера.

4. Также создайте в этом же каталоге файл `zapusk.conf` содержанием:
```
state_dir=_state
```
> zapusk.conf это файл конфигурации для zapusk-tool. В данном случае записана настройка,
> где хранить состояние запуск-программы. У программ есть состояние, чтобы понимать
> какие блоки развернуты, а какие еще нет. Это позволяет автоматически
> выполнять destroy-команду для блоков, которые развернуты а затем удалены.

5. Находясь в каталоге, выполните команду: `zapusk apply`. Вы увидите результат:
```
creating alfa 5
creating beta 7
```
> Алгоритм zapusk-tool прошелся по блокам и вызвал `apply` у каждого блока.

> Формат вызова zapusk: `zapusk имякоманды`
> Была вызвана `zapusk apply`, сообразно имя команды это apply.
> Другие параметры командной строки приведены на странице zapusk-tool.

6. Теперь выполните `zapusk work`. Вы увидите:
```
working beta 7
```
> Алгоритм прошелся по блокам и вызвал `work` у каждого блока.
> Поскольку у block1 команды work не указано, он ничего и не сделал.

7. Выполните `zapusk destroy`. Результат:
```
destroying alfa 5
```
> Команда destroy была передана всем блокам. Она определена только
> в блоке block1, поэтому там и сработала.

## Другие примеры

Приводятся в каталоге [examples](examples)

## Дополнительно

Можно:
* Ознакомиться со [спецификацей zapusk](spec-1.md).
* Использовать [блоки ЛайнАкт](https://github.com/pavelvasev/zapusk-lact-libs).
