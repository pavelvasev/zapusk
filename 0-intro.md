# Введение в Zapusk

## Трагедия

Пусть некто, скажем Петр Васильевич, желает настроить на некоем линукс-сервере свой проект.

Он заходит на сервер и настраивает его - устанавливает пакеты, пишет файлы конфигурации,
загружает программы из репозиториев. В конце концов он пишет init.d или systemd скрипты,
запускает их, и идет пить чай.

Через некоторое время к Петру Васильевичу приходит друг и предлагает установить такой
же проект на сервер его, то есть друга. Петр Васильевич с радостью соглашается, и 
повторяет вышепроведенные действия. Пьют чай.

Приходит письмо из-за рубежа - тоже просят проект. Петр Васильевич пишет скрипт, чтобы
автоматизировать установку. Скрипт работает, все нормально. Пьют чай по Zoom.

Прошло время. На сервере друга что-то пришлось поднастроить. На заграничном сервере - 
подпилить. А на своем сервере - разнести проект на три сервера. Короче, скрипт стал уже 
не тот. Не подходит он для всех трех развертываний. Ну ничего, думает Петр Васильевич и пьет чай.

Прошло еще время. Несколько раз Петр Васильевич настраивал сервера, что-то добавлял. Пил чай.
Скрипт совсем забросил - негож, да и длинный стал.

И вот, в какой-то прекрасный момент Петр Васильевич начал осознавать. Что у него несколько
проектов (ведь у каждого уважающего себя гражданина есть несколько проектов), и каждый размещен
в количестве эн экземпляров на каких-то серверах, и каждый экземпляр живет своей особенной жизнью, 
а в довершение какие-то сервера используются под разные части сразу нескольких проектов.
Чаю после понимания этой картины Петру Васильевичу не хотелось.

## Осознание

* Проблема Петра Васильевича в том, что он все делал руками. Это работает на маленьких проектах,
но на проектах из 3-5 приложений уже становится сложно. Тем более если они устанавливаются в разных местах.
* Вторая проблема в том, что он пытался применить неподходящие средства. Баш-скрипт, а равно как и 
Puppet/Ansible/Chef рецепты, не отслеживают того, что они сделали. Они понимают только команду "вперед" 
и действуют без разбора.

## Действие

Петр Васильевич обнаруживает Zapusk.
* Петр Васильевич описывает как надо развертывать его приложение на zapusk-языке.
* Затем он описывает конкретные экземпляры развертывания.
На этом же языке, используя вышенаписанное и лишь указывая их параметры.
* В итоге Петр Васильевич имеет по папкам разложенные все его проекты на всех серверах.
* Он может зайти на любой сервер в zapusk-каталог любого требуемого проекта и сказать `zapusk apply`,
после чего сервер настроится как надо ровно в соответствии с инструкциями.
* Если же Петр Васильевич в будущем решит обновить zapusk-коды, то новое выполнение `zapusk apply`
сможет привести систему ровно к требуемому состоянию, включая удаление того, что стало ненужно
и из этих кодов было например удалено.

Петр Васильевич счастлив. На этом его роль заканчивается и он удаляется.

## Что дальше
* [Отличие от других средств](2-look-around.md)
* [Начало работы](examples/1-getting-started.zdb)
* [zapusk-tool](https://github.com/pavelvasev/zapusk-tool)
* [zapusk-lact-libs](https://github.com/pavelvasev/zapusk-lact-libs)
